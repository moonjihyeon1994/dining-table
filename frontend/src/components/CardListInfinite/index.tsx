import * as React from 'react';
import { Card } from './Card';
import InfiniteScroll from 'react-infinite-scroll-component';

import { inject, observer } from 'mobx-react';
import { STORES } from '~constants';
import SearchbarStore from '~stores/searchbar/SearchbarStore';

export interface CardListInfiniteProps {
  searchbarStore?: SearchbarStore;
}


export default inject(STORES.SEARCHBAR_STORE)(
  observer(
    (cardListProps: CardListInfiniteProps) => {

      const cardMap = cardListProps.searchbarStore!.stores;

      const page = cardListProps.searchbarStore!.page;
      const totalpageNo = cardListProps.searchbarStore!.totalpage;

      const fetchData = () => {
        if (totalpageNo < page) {
        } else {
          setTimeout(() => {
            cardListProps.searchbarStore!.getSearhList(page);
          }, 1000);
        }
      }

      return (
        <InfiniteScroll
          dataLength={cardListProps.searchbarStore!.getStores().length}
          next={fetchData}
          hasMore={cardListProps.searchbarStore!.getHasMore()}
          loader={<h4>Loading...</h4>}
        >
          { cardMap.map(
            (item: any, i: number) => <Card key={i} imageUrl={"data:image/png;base64,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"} data={item}/>) 
          }
        </InfiniteScroll>
      );
    }
  )
);
